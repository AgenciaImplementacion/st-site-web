<div class="app-body">
  <main class="main d-flex align-items-center">
    <div class="container">
      <div class="row">
        <div class="col-md-8 mx-auto">
          <div class="card-group">
            <div class="card p-4">
              <div class="card-body">
                <form #formulariologin="ngForm">
                  <h1 class="text-center">Registro usuarios <br> Sistema de transición</h1>
                  <p class="text-muted">Ingresé los siguientes datos.</p>
                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text">
                        <i class="material-icons">
                          perm_identity
                        </i>
                      </span>
                    </div>
                    <input type="text" name="firstName" class="form-control" placeholder="Nombres"
                      autocomplete="firstName" [(ngModel)]="registerData.firstName" required>
                  </div>
                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text">
                        <i class="material-icons">
                          list_alt
                        </i>
                      </span>
                    </div>
                    <input type="text" name="lastName" class="form-control" placeholder="Apellidos"
                      autocomplete="lastName" [(ngModel)]="registerData.lastName" required>
                  </div>
                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text">
                        <i class="material-icons">
                          account_circle
                        </i>
                      </span>
                    </div>
                    <input type="text" name="username" class="form-control" placeholder="Nombre de usuario"
                      autocomplete="username" [(ngModel)]="registerData.username" required>
                  </div>
                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="material-icons">
                          email
                        </i></span>
                    </div>
                    <input type="email" name="email" class="form-control" placeholder="Correo electronico"
                      autocomplete="email" [(ngModel)]="registerData.email" required>
                  </div>

                  <div class="input-group mb-4">
                    <div class="input-group-prepend">
                      <span class="input-group-text">
                        <i class="material-icons">
                          security
                        </i>
                      </span>
                    </div>
                    <input type="password" name="password" class="form-control" placeholder="Contraseña"
                      autocomplete="current-password" [(ngModel)]="registerData.password" required>
                  </div>
                  <div class="input-group mb-4">
                    <div class="input-group-prepend">
                      <span class="input-group-text">
                        <i class="material-icons">
                          lock
                        </i>
                      </span>
                    </div>
                    <input type="password" name="confirmationPassword" class="form-control"
                      placeholder="Confirmar contraseña" autocomplete="current-password"
                      [(ngModel)]="registerData.confirmationPassword" required>
                  </div>
                  <div class="input-group">
                    <div class="row text-center">
                      <div class="col-12 col-sm-4">
                        <div class="form-check">
                          <input name="selectAdmin" class="form-check-input" type="checkbox" value="" id="selectAdmin1"
                            [(ngModel)]="registerData.activeAdmin">
                          <label class="form-check-label" for="defaultCheck1">
                            Administrador
                          </label>
                        </div>
                      </div>
                      <div class="col-12 col-sm-4">
                        <div class="form-check">
                          <input name="selectManager" class="form-check-input" type="checkbox" value=""
                            id="selectManager" [(ngModel)]="registerData.activeManager">
                          <label class="form-check-label" for="defaultCheck1">
                            Gestor
                          </label>
                        </div>
                      </div>
                      <!-- <div class="col-12 col-sm-3">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                          <label class="form-check-label" for="defaultCheck1">
                            Operador
                          </label>
                        </div>
                      </div> -->
                      <div class="col-12 col-sm-4">
                        <div class="form-check">
                          <input name="selectProvider" class="form-check-input" type="checkbox" value=""
                            id="selectProvider" [(ngModel)]="registerData.activeProvider">
                          <label class="form-check-label" for="defaultCheck1">
                            Proveedor
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <small id="perfil" class="form-text text-muted mb-3">Seleccione los perfiles para
                    este usuario</small>
                  <div class="mb-3" *ngIf="registerData.activeManager">
                    <!-- Gestor lista unica -->
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text" aria-required="true">* Gestor</label>
                      </div>
                      <select (change)="getProfilesManager()" class="custom-select" name="managers" id="managers"
                        [(ngModel)]="registerData.roleManager.managerId">
                        <option value='0' selected>Seleccione el Gestor</option>
                        <option [ngValue]="item.id" *ngFor="let item of managers">{{item.name}}</option>
                      </select>
                    </div>
                    <!-- Perfiles Gestor lista multiple -->
                    <div class="input-group mt-2">
                      <div class="input-group-prepend">
                        <label class="input-group-text" aria-required="true">* Perfil Gestor</label>
                      </div>
                      <select class="custom-select" name="managersprfile" id="managersprofile"
                        [(ngModel)]="registerData.roleManager.profiles" multiple>
                        <option [ngValue]="item.id" *ngFor="let item of profilesManagers">{{item.name}}</option>
                      </select>
                    </div>
                    <small id="entities" class="form-text text-muted">Seleccione el GESTOR y luego su Perfil</small>
                  </div>

                  <div class="mb-3" *ngIf="registerData.activeProvider">
                    <!-- Proveedor lista unica -->
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text" aria-required="true">* Proveedor</label>
                      </div>
                      <select (change)="getProfilesProviders(registerData.roleProvider.providerId)" class="custom-select"
                        name="providers" id="providers" [(ngModel)]="registerData.roleProvider.providerId">
                        <option value='0' selected>Seleccione el Proveedor</option>
                        <option [ngValue]="item.id" *ngFor="let item of providers">{{item.name}}</option>
                      </select>
                    </div>
                    <!-- Perfiles Proveedor lista multiple -->
                    <div class="input-group mt-2">
                      <div class="input-group-prepend">
                        <label class="input-group-text" aria-required="true">* Perfil Proveedor</label>
                      </div>
                      <select class="custom-select" name="profilesProviders" id="profilesProviders"
                        [(ngModel)]="registerData.roleProvider.profiles" multiple>
                        <option [ngValue]="item.id" *ngFor="let item of profilesProviders">{{item.name}}</option>
                      </select>
                    </div>
                    <small id="entities" class="form-text text-muted">Seleccione el Proveedor y luego su Perfil</small>
                  </div>

                  <div class="row mt-4">
                    <div class="col-6">
                      <button type="button" class="btn btn-primary px-4" (click)="register()">Registrar</button>
                    </div>
                  </div>
                </form>
                <!-- <pre>{{registerData | json}}</!-->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
