<div>
  <app-page-header [heading]="'Solicitudes pendientes'" [icon]="'fa-star'">
  </app-page-header>
  <div class="card text-center">
    <div class="card-header">
      <h3>Solicitud de insumo pendiente</h3>
    </div>
    <div class="card-body">
      <div class="row justify-content-center">
        <div class="col-12">
          <table class="table table-striped table-inverse table-responsive">
            <thead class="thead-inverse">
              <tr>
                <th>ID</th>
                <th>Departamento</th>
                <th>Municipio</th>
                <th>Gestor</th>
                <th>Categoria</th>
                <th>Fecha de Solicitud</th>
                <th>Fecha limite</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of dataRequestPending">
                <td scope="row">{{item.id}}</td>
                <td scope="row">{{item.municipality.department.name}}</td>
                <td scope="row">{{item.municipality.name}}</td>
                <td scope="row">{{item.provider.name}}</td>
                <td scope="row">{{item.provider.providerCategory.name}}</td>
                <td scope="row">{{formatDate(item.createdAt)}}</td>
                <td scope="row">{{formatDate(item.deadline)}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div *ngFor="let item of dataRequestPending; let idOut = index;">
        <div *ngFor="let supp of item.suppliesRequested; let idInt = index;">
          <div class="row">
            <div class="input-group col-12 col-sm-3 mb-2">
              <div class="input-group">
                <div class="input-group-prepend input-group-text">
                  <div>* Insumo</div>
                </div>
                <div class="form-control">
                  {{supp.typeSupply.name}}
                </div>
              </div>
            </div>
            <div class="input-group col-12 col-sm-3 mb-2">
              <div class="input-group">
                <div class="input-group-prepend input-group-text">
                  <div>* Tipo</div>
                </div>
                <div class="form-control">
                  <select (ngModelChange)="modelChanged(supp)" [(ngModel)]="supp.typeSupplyId"
                    name="tipos{{idOut}}{{idInt}}" id="tipo{{idOut}}{{idInt}}">
                    <option value='0' selected>Seleccione el tipo</option>
                    <option [ngValue]="tipo.file" *ngFor="let tipo of supp.type">{{tipo.name}}</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="input-group col-12 col-sm-4 mb-2">
              <div class="input-group">
                <div class="form-control">
                  <div [ngSwitch]="supp.typeSupplyId">
                    <div *ngSwitchCase="typeDataFieldModel.typeDataFile">
                      <div class="input-group">
                        <input id="file{{idOut}}{{idInt}}" name="file{{idOut}}{{idInt}}" class="form-control"
                          type="file" (change)="docSoport($event.target.files,idOut, idInt )" multiple>
                      </div>
                      <!-- <div class="input-group">
                        <div class="input-group-prepend input-group-text">
                          <div>* Justifique</div>
                        </div>
                        <input class="form-control" id="justificationFIle{{idOut}}{{idInt}}" type="text"
                          name="justificationFile{{idOut}}{{idInt}}" [(ngModel)]="supp.justification">
                      </div> -->
                    </div>
                    <div *ngSwitchCase="typeDataFieldModel.typeDataUrl">
                      <div class="input-group">
                        <div class="input-group-prepend input-group-text">
                          <div>* URL</div>
                        </div>
                        <input class="form-control" id="url{{idOut}}{{idInt}}" type="url" name="url{{idOut}}{{idInt}}"
                          [(ngModel)]="supp.url">
                      </div>
                      <!-- <div class="input-group">
                        <div class="input-group-prepend input-group-text">
                          <div>* Justifique</div>
                        </div>
                        <input class="form-control" id="justificationUrl{{idOut}}{{idInt}}" type="text"
                          name="justificationUrl{{idOut}}{{idInt}}" [(ngModel)]="supp.justification">
                      </div> -->
                    </div>
                    <div *ngSwitchCase="typeDataFieldModel.typeDataNone">
                      <div class="input-group">
                        <div class="input-group-prepend input-group-text">
                          <div>* Justifique</div>
                        </div>
                        <input class="form-control" id="justificationNone{{idOut}}{{idInt}}" type="text"
                          name="justificationNone{{idOut}}{{idInt}}" [(ngModel)]="supp.justification">
                      </div>
                    </div>
                    <div *ngSwitchDefault>
                      <h6>No hay ning√∫n campo seleccionado</h6>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-2 mb-2">
              <button type="button" class="btn" id="boton{{idOut}}{{idInt}}"
                [ngClass]="{'btn-success':supp.success.status == true, 'btn-dark':!supp.success.status }"
                (click)="send(supp)">
                Enviar
              </button>
            </div>
          </div>
        </div>

      </div>
    </div>
    <div class="card-footer text-muted">
      <button type="button" class="btn btn-dark" (click)="closeRequest()">
        Cerrar Solicitud
      </button>
    </div>
  </div>
</div>
